syntax = "proto3";

package proto;

import "google/protobuf/timestamp.proto";

option go_package = "pkg/proto/appointment";

message Appointment {
  uint32 id = 1;
  uint32 patient_id = 2;
  bool is_emergency = 3;
  uint32 procedure_id = 4;
  uint32 report_id = 5;
  uint32 referring_doctor_id = 6;
  uint32 reporting_doctor_id = 7;
  google.protobuf.Timestamp appointment_time = 8;
  uint32 organization_id = 9;
  uint32 payment_id = 10;
  string note = 11;
  string status = 12;
  repeated RequestForm request_form = 13;
  bool has_paid_commission = 14;
  google.protobuf.Timestamp created_at = 15;
  uint32 original_appointment_id = 16; 
  uint32 parent_appointment_id = 17;  
  int32 version = 18;                           
  bool is_active = 19;                          
  bool is_original = 20;                        
  uint32 modified_by = 22;            
  string modification_reason = 23;              
  google.protobuf.Timestamp modified_at = 24;
}

message ReportVersion {
    uint32 id = 1;
    uint32 report_id = 2;
    uint32 radiologist_id = 3;
    string findings = 4;
    string impressions = 5;
    string clinical_details = 6;
    string url = 7;
    string status = 8;
    string no_header_url = 9;
    google.protobuf.Timestamp confirmed_at = 10; 
}

message Report {
    uint32 id = 1;
    uint32 appointment_id = 2;
    string referring_hospital = 3;
    bool is_completed = 4;
    repeated ReportVersion versions = 5;
}

message RequestForm {
    uint32 id = 1;
    uint32 appointment_id = 2;
    string url = 3;
    bool is_file = 4;
}


message ModifyProcedure {
    Appointment old_version = 1;
    Appointment new_version = 2;
}
