syntax = "proto3";

package tasks;

option go_package = "pkg/proto/tasks";

import "google/protobuf/timestamp.proto";

// TaskNotification represents a notification about a task
message TaskNotification {
    string task_id = 1;
    uint32 user_id = 2;
    string notification_type = 3; // task_assigned, task_reassigned, deadline_approaching, deadline_exceeded, comment_added, attachment_uploaded, task_completed
    string subject = 4;
    string message = 5;
    
    // Task context
    uint32 appointment_id = 6;
    string patient_name = 7;
    string modality = 8;
    string procedure = 9;
    google.protobuf.Timestamp due_date = 10;
    google.protobuf.Timestamp deadline = 11;
    string priority = 12;
    
    // Time-based fields (optional, depending on notification type)
    int32 hours_until_due = 13;
    int32 days_overdue = 14;
    
    // Notification delivery preferences
    bool send_email = 15;
    bool send_in_app = 16;
    string email_address = 17;
}

// TaskEscalation represents an escalation notification to admins
message TaskEscalation {
    string task_id = 1;
    uint32 admin_id = 2;
    uint32 appointment_id = 3;
    string patient_name = 4;
    string modality = 5;
    string assigned_to = 6; // Name of person task is assigned to
    int32 days_overdue = 7;
    string priority = 8;
    google.protobuf.Timestamp deadline = 9;
    string subject = 10;
    string message = 11;
    
    // Notification delivery preferences
    bool send_email = 12;
    bool send_in_app = 13;
    string email_address = 14;
}

// DailySummary represents a daily morning summary notification
message DailySummary {
    uint32 user_id = 1;
    int32 total_incomplete = 2;
    int32 urgent_count = 3;
    int32 high_count = 4;
    int32 medium_count = 5;
    int32 low_count = 6;
    int32 due_today_count = 7;
    int32 overdue_count = 8;
    string breakdown = 9; // Formatted breakdown string
    string subject = 10;
    string message = 11;
    
    // Notification delivery preferences
    bool send_email = 12;
    bool send_in_app = 13;
    string email_address = 14;
    google.protobuf.Timestamp summary_date = 15;
}